#!/bin/bash
set -e

echo "âŒ›ï¸  `date +"%H:%M:%S"` Data fetch from remote repo..."
git fetch origin

echo "âœï¸  `date +"%H:%M:%S"` Matched branch search..."
NEWBUILD=$(git branch -a | grep "remotes/origin/build" | sort -V | tail -n 1 | cut -d "/" -f 3)
if [[ "$NEWBUILD" == "" ]]; then
    >&2 echo "âŒ No build branch found in repo"
    exit 1
fi

echo "âœ…  Branch to checkout: $NEWBUILD"
git checkout $NEWBUILD
echo "ğŸ  `date +"%H:%M:%S"` Done!"
